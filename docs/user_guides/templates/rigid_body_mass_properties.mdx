import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

The mass properties of a rigid-body is composed of three parts:
- The **mass** which determines the resistance of the rigid-body wrt. linear movements. A high mass implies that
  larger forces are needed to make the rigid-body translate.
- The **angular inertia** determines the resistance of the rigid-body wrt. the angular movements. A high angular
  inertia implies that larger torques are needed to make the rigid-body rotate.
- The **center-of-mass** determines relative to what points torques are applied to the rigid-body.

:::note
Zero is a special value for masses and angular inertia. A mass equal to zero is interpreted as an infinite mass.
An angular inertia equal to zero is interpreted as an infinite angular inertia. Therefore, a rigid-body with a
mass equal to zero will not be affected by any force, and a rigid-body with an angular inertia equal to zero will
not be affected by any torque.
:::

Computing the mass and angular-inertia can often be difficult because they depend on the geometric shape of the
object being simulated. This is why they are automatically computed by Rapier when a [collider](#collider) is
attached to the rigid-body: the collider add its own mass and angular-inertia contribution (computed based on the
collider's shape and density) to the rigid-body it is attached to:

<rapier>

```rust
<load path='/2d/rust/examples/rs_rigid_bodies2.rs' marker='Mass1' />
```

</rapier>

<bevy>

```rust
<load path='/2d/bevy/examples/rigid_bodies2.rs' marker='Mass1' />
```

</bevy>
<js>

```js
let rigidBodyDesc = RigidBodyDesc.dynamic();
let rigidBody = world.createRigidBody(rigidBodyDesc);
// The default density is 1.0, we are setting 2.0 for this example.
let colliderDesc = ColliderDesc.ball(1.0).setDensity(2.0);
// When the collider is attached, the rigid-body's mass and angular
// inertia is automatically updated to take the collider into account.
world.createCollider(collider, rigidBody);
```

</js>

Alternatively, it is possible to set the mass properties of a rigid-body when it is created. Keep in mind that
this won't prevent the colliders' contributions to be added to these values. So make sure to set the attached
colliders' densities to zero if you want your explicit values to be the final mass-properties values.

<rapier>

<Tabs
groupId="dim"
defaultValue="2D"
values={[
{label: 'Example 2D', value: '2D'},
{label: 'Example 3D', value: '3D'},
]}>
<TabItem value="2D">

```rust
<load path='/2d/rust/examples/rs_rigid_bodies2.rs' marker='Mass2' />
```
```rust
<load path='/2d/rust/examples/rs_rigid_bodies2.rs' marker='Mass3' />
```

  </TabItem>
  <TabItem value="3D">

```rust
<load path='/3d/rust/examples/rs_rigid_bodies3.rs' marker='Mass2' />
```
```rust
<load path='/3d/rust/examples/rs_rigid_bodies3.rs' marker='Mass3' />
```

  </TabItem>
</Tabs>

</rapier>
<bevy>

```rust
<load path='/2d/bevy/examples/rigid_bodies2.rs' marker='Mass2' />
```
```rust
<load path='/2d/bevy/examples/rigid_bodies2.rs' marker='Mass3' />
```

</bevy>
<js>

<Tabs
groupId="dim"
defaultValue="2D"
values={[
{label: 'Example 2D', value: '2D'},
{label: 'Example 3D', value: '3D'},
]}>
<TabItem value="2D">

```js
/* Set the mass-properties when the rigid-body is created. */
let rigidBodyDesc = RAPIER.RigidBodyDesc.dynamic()
    .setAdditionalMass(0.5)
    .setAdditionalPrincipalAngularInertia(0.3)
    // Sets both the mass and angular inertia at once.
    .setAdditionalMassProperties(
        0.5,                // Mass.
        { x: 0.0, y: 1.0 }, // Center of mass.
        0.3                 // Principal angular inertia.
    );
let rigidBody = world.createRigidBody(rigidBodyDesc);
```

  </TabItem>
  <TabItem value="3D">

```js
/* Set the mass-properties when the rigid-body is created. */
let rigidBodyDesc = RAPIER.RigidBodyDesc.dynamic()
    .setAdditionalMass(0.5)
    .setAdditionalPrincipalAngularInertia({ x: 0.3, y: 0.2, z: 0.1 })
    // Sets both the mass and angular inertia at once.
    .setAdditionalMassProperties(
        0.5,                        // Mass.
        { x: 0.0, y: 1.0, z: 0.0 }, // Center of mass.
        { x: 0.3, y: 0.2, z: 0.1 }, // Principal angular inertia.
        { w: 1.0, x: 0.0, y: 0.0, z: 0.0 } // Principal angular inertia frame (unit quaternion).
    );
let rigidBody = world.createRigidBody(rigidBodyDesc);
```

  </TabItem>
</Tabs>

</js>
